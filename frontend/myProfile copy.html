<!DOCTYPE html>
<html>

<head>
        <script type="text/javascript">
        async function checklogin() {
            if (sessionStorage.getItem("user") == null) {
                window.location.href = "loginPage.html";
            await pyodide.loadPackage("wordcloud");

        }
        window.onload = checklogin;
    </script>
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
    <link href="./css/main.css" rel="stylesheet" />
      <script type="text/javascript" src="apiGateway-js-sdk/lib/axios/dist/axios.standalone.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/rollups/hmac-sha256.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/rollups/sha256.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/components/hmac.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/CryptoJS/components/enc-base64.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/url-template/url-template.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/sigV4Client.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/apiGatewayClient.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/simpleHttpClient.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/lib/apiGatewayCore/utils.js"></script>
	<script type="text/javascript" src="apiGateway-js-sdk/apigClient.js"></script>
    <div class="header">
        
        <a href="./searchResults.html"> <img style="float:left;" class="logo_img" src="./images/v61_360.png"></a>
   
        <button type="button" onclick="window.location.href = './promptgen.html';" class="v4_591"><span class="v4_60">Generate Prompt</span></button>
        <button type="button" class="v4_59" onclick="window.location.href = './uploadStory1.html';"><span class="v4_60">+ Upload a Story</span></button>
        <img style="float:right;" class="v68_567" src="./images/v68_567.png">
        <span class="v69_568"><a style="color:white" href="./readingShelf.html">Reading Shelf</a></span>
        <!-- <img style="float:right;" class="v4_58" src="./images/v4_58.png">
        <span style="float:right;" class="v4_57"><a style="color:white" href="./myCart.html">Cart</a></span> -->
        <img style="float:right;" class="v4_55" src="./images/v4_55.png">
        <span style="float:right;" class="v4_56"><a style="color:white" href="./myProfile.html">My Profile</a></span>
    </div>
</head>
<body>
    <py-script>
        import asyncio
        import micropip
        async def getwordcloud():
            await micropip.install("matplotlib")
            await micropip.install("boto3")
            await micropip.install("wordcloud")
        asyncio.ensure_future(getwordcloud())
    </py-script>

    <span class="v30_171">John Doe (johnd1218)</span>
    <hr class="v32_2491">
    <span class="v30_174">Email</span>
    <div class="v30_175"><input> </input> </div> 
    <img class="v30_196" src="./images/v30_196.png">
    <span class="v30_177">Password</span>
    <img class="v30_199" src="./images/v30_199.png">

    
    <button type="button" class="v145_2" ><span class="v145_3">Generate Wrapped</span></button>
    <button type="button" class="v30_194" onclick="sessionStorage.clear(); window.location.href = './loginPage.html';"><span class="v30_195">Sign Out</span></button>
    <div id="imgcont">

    </div>
    <py-script>
        from js import document 
        from pyodide.ffi import create_proxy

        def runPython(proxy):
            import json
            import boto3
            import matplotlib.pyplot as plt
            from collections import defaultdict
            import matplotlib.gridspec as gridspec
            import os
            from wordcloud import WordCloud, STOPWORDS

            print("you clicked me")

        function_proxy = create_proxy(runPython)

        document.getElementsByClassName("v145_2")[0].addEventListener("click", function_proxy)

    </py-script>
</body>

<script>
    function getwrapped() {
        var apigClient = apigClientFactory.newClient();
        var params = {
            "userID": sessionStorage.getItem("user")
        };
        var body = {
            "userID": sessionStorage.getItem("user")
        };
        var additionalParams = {};
        apigClient.getwrappedUserIDGet(params, body, additionalParams)
            .then(function(result) {
                img = document.createElement("img");
                cont =document.getElementById("imgcont");
                cont.innerHTML = "";
                img.src = result.data.s3url;
                cont.appendChild(img);
            }).catch(function(result) {
                console.log(result);
            });
    }
</script>
</html>